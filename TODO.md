# Туду

Я не вывез нормальную доску, так что пишем объяснения и задачи здесь.

## Задачи в очереди

- Реализовать классового
- Реализовать резолвер
- Реализовать ассемблер

## Задачи в процессе

- Написать базовую грамматику для опоры (KlasterK)

## Сделано

- Создать репозиторий ¯\\\_(ツ)\_/¯

## Объяснения

### База

ObjAs это объектно-ориентированный ассемблер для архитектуры RV32I.

Планируется поддержка ООП с  наследованием, инкапсуляцией и полиморфизмом, виртуальные методы, 
а также пространства имён.

Мы стремимся быть как можно ближе к низкому уровню и не добавляем лишние инструкции там,
где программист не просит (хотя можем добавить дополнительные данные в секцию .data)

Класс в ObjAs представляет собой пространство имён, где можно создавать секции 
(которые потом будут помещены в глобальной) и поля.

В секциях можно расположить методы, а если быть точнее, метки. А также статические поля.

В полях можно разместить поля (да ладно), а также там будет размещаться указатель на
виртуальная таблица, если класс виртуальный.

Выделение памяти под экземпляр ручное, как и очистка.

Инициализирует поля конструктор. Деструктор проводит все нужные действия для разрушения объекта. 
Их нужно вызывать явно.

Если нужно вызвать виртуальный метод, то программисту придётся самому доставать указатель 
на метод из виртуальной таблицы.

Для тех, кому не нужен полный контроль, будет создана стандартная библиотека для типовых 
ООП операций.

### Философия

ObjAs следует философии, согласно которой ассемблер не добавляет скрытые инструкции процессора 
без явного указания программиста.

### Будущее

Когда прототип будет разработан, мы скорее всего перепишем ассемблер на C++ и так
и продолжим работу.

### Структура ассемблера

Ассемблер основан на либе Lark. Сейчас я думаю о такой структуре работы:

- Препроцессор самостоятельно парсит файл и делает макроподстановки;
- Lark превращает текст без макросов в AST по монолитной грамматике;
- Проверяется инкапсуляция классов, секции классов распологаются в глобальных секциях,
  размещаются vtable;
- Метки заменяются на числа;
- Производятся вычисления;
- Производится ассемблирование в машинный код.

### Язык

Язык нашего ассемблера будет похож на NASM.
